!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var n=i(1),r=i(2),s=i(24);window.GLPoint=n.GLPoint,window.GLPopMenu=r.GLPopMenu,window.GLBubbleView=s.GLBubbleView,window.GLBubbleView.sharedInstance},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1];i(this,t),this.x=e,this.y=n}return n(t,[{key:"isEqualTo",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"converPoint",value:function(e){return new t(e.x-this.x,e.y-this.y)}}],[{key:"zero",value:function(){return new t}},{key:"copy",value:function(e){return new t(e.x,e.y)}}]),t}();e.GLPoint=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t,e,i){for(var n=!0;n;){var r=t,s=e,a=i;o=u=h=void 0,n=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,i=a,n=!0}},o=i(3),h=i(5),u=(i(1),i(4),i(6)),c=u(),l=u(),f=function(t){function e(t){var i=this;if(n(this,e),t!==l)throw"大兄弟，俺是个单例类啊";a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.width=0,this.tapRanges=[],this.movedIndex=0,this.currentScale=this.currentAlpha=0,this.currentTranslate=30,this.isShow=!1,this.panel=this.createPanel(),this.svg=new o.GLSVG,this.addTapListener(this.svg.domElement,function(t){i.menuTapped(t)}),this.panel.appendChild(this.svg.domElement),this.tappedHandler=function(t){i.panelTapped(t)}}return r(e,t),s(e,[{key:"setMenuItems",value:function(t){this.parseItems(t)}},{key:"ifNeedsDisplay",value:function(t){this.isShow===!0?this.quitDisplay():(document.body.appendChild(this.panel),this.addTapListener(this.panel,this.tappedHandler),this.svg.setPosition(t),this.dispaly())}},{key:"dispaly",value:function(){this.isShow=!0,this.svg.domElement.style.opacity=this.currentAlpha=0,this.startAnimating()}},{key:"quitDisplay",value:function(){this.isShow=!1,this.startAnimating()}},{key:"stopAnimating",value:function(){a(Object.getPrototypeOf(e.prototype),"stopAnimating",this).call(this),this.isShow===!1&&(document.body.removeChild(this.panel),this.removeTapListener(this.panel,this.tappedHandler))}},{key:"enterFrame",value:function(){this.isAnimating=!0,this.isShow===!0?this.currentAlpha+=.07:this.currentAlpha-=.09,this.currentAlpha<0||this.currentAlpha>1?(this.currentAlpha=this.currentAlpha<0?0:1,this.stopAnimating()):a(Object.getPrototypeOf(e.prototype),"enterFrame",this).call(this),this.svg.domElement.style.opacity=this.currentAlpha}},{key:"panelTapped",value:function(t){t.preventDefault(),this.quitDisplay()}},{key:"menuTapped",value:function(t){var e,i,n=this.svg.frame;e=t.pageX-n.x,i=t.pageY-n.y;for(var r=0;r<this.tapRanges.length;r++)if(e<this.tapRanges[r].to){this.tapRanges[r].callback(),this.quitDisplay();break}}},{key:"parseItems",value:function(t){this.tapRanges=[];for(var e=0,i=10,n=i,r=0;r<t.length;r++){var s=t[r].text,a=16*s.length+2*i,o=n+a;this.tapRanges[r]={text:s,from:n,to:o,center:n+a/2,callback:t[r].callback},e+=s.length,n=o}var h=this.tapRanges[t.length-1];h.to=h.to+i,this.width=h.to,this.svg.width=this.width,this.svg.textItems=this.tapRanges}},{key:"createPanel",value:function(){var t="position:fixed; z-index:20000; top:0px; left:0px; width:"+window.innerWidth+"px; height:"+window.innerHeight+"px;",e=document.createElement("div");return e.setAttribute("style",t),e}}],[{key:"instance",get:function(){return this[c]||(this[c]=new e(l)),this[c]}}]),e}(h.IAnimation);e.GLPopMenu=f},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(4),a=function(){function t(){n(this,t),this.isUpDirection=!1,this.minWidth=64,this.directionOffsetY=5,this.textItems=null,this.frame=new s.GLRect(100,100,64,54),this.marginLeft=5,this.marginRight=5,this.screenWidth=window.innerWidth,this.maxFrameX=this.screenWidth-this.marginRight,this.angleOffsetX=0,this.domElement=this.createSVGElement()}return r(t,[{key:"setPosition",value:function(t){this.frame.center=GLPoint.copy(t);var e=this.frame.height+this.directionOffsetY;t.y<e?(this.isUpDirection=!0,this.frame.y=t.y+this.directionOffsetY):(this.isUpDirection=!1,this.frame.y=t.y-e);var i=0;this.frame.x<this.marginLeft?(i=this.frame.x-this.marginLeft,this.frame.x=this.marginLeft):this.frame.getMaxX()>this.maxFrameX&&(i=this.frame.getMaxX()-this.maxFrameX,this.frame.x=this.maxFrameX-this.frame.width),this.angleOffsetX=this.validateAngleOffsetX(i),this.domElement.style.top=this.frame.y+"px",this.domElement.style.left=this.frame.x+"px",this.attachText(),this.calculateBorder()}},{key:"validateAngleOffsetX",value:function(t){var e=this.frame.halfWidth-13;return this.isUpDirection&&(t*=-1),-e>t?t=-e:t>e&&(t=e),t}},{key:"attachText",value:function(){var t=23;this.isUpDirection?(t=40,this.backgroundGroup.setAttribute("transform","translate("+this.frame.halfWidth+", "+this.frame.halfHeight+") rotate(180) translate("+-1*this.frame.halfWidth+", "+-1*this.frame.halfHeight+")")):this.backgroundGroup.setAttribute("transform","rotate(0)");for(var e=this.textGroup.querySelectorAll("text"),i=0;i<this.textItems.length;i++){var n=e[i];n.setAttribute("x",this.textItems[i].center),n.setAttribute("y",t),n.textContent=this.textItems[i].text}}},{key:"calculateBorder",value:function(){var t=3,e=8,i=12,n=.5,r=this.frame.width-1,s=.5,a=36,o=r/2+this.angleOffsetX,h="M"+(n+t)+" "+s+" L"+(r-t)+" "+s+" A"+t+" "+t+" 0 0 1 "+r+" "+(s+t)+" L"+r+" "+(a-t)+" A"+t+" "+t+" 0 0 1 "+(r-t)+" "+a+" L"+(o+i/2)+" "+a+" L"+o+" "+(a+e)+" L"+(o-i/2)+" "+a+" L"+(n+t)+" "+a+" A"+t+" "+t+" 0 0 1 "+n+" "+(a-t)+" L"+n+" "+(s+t)+" A"+t+" "+t+" 0 0 1 "+(n+t)+" "+s;console.log(this.domElement),this.borderPath.setAttribute("d",h)}},{key:"createSVGElement",value:function(){function t(t){return document.createElementNS(s,t)}function e(t,e,i){t.setAttributeNS(null,"x",e),t.setAttributeNS(null,"y",i)}function i(t,e){t.setAttributeNS(null,"style",e)}function n(t,e,i,n){t.setAttributeNS(null,"id",e),t.setAttributeNS(null,"width",i),t.setAttributeNS(null,"height",n)}function r(n,r,s){var o=t("use");return e(o,n,r),i(o,s),o.setAttributeNS(a,"href","#border"),o}var s="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xlink",o=t("svg");n(o,"glpopmenu",this.minWidth,this.frame.height),i(o,"cursor:hand; position: absolute; visibility:visiable;");var h=t("symbol");h.setAttributeNS(null,"id","border"),this.borderPath=document.createElementNS(s,"path"),h.appendChild(this.borderPath),o.appendChild(h);var u=t("defs"),c=t("mask");n(c,"alphaMask","400","54");var l=t("rect");n(l,"rect","400","54"),i(l,"stroke:none; fill: #333333"),c.appendChild(l),u.appendChild(c),o.appendChild(u);var f=r("0","3","fill:#000000;stroke-width:0; mask:url(#alphaMask);"),p=r("0","0","fill:#555;stroke:#353535;stroke-width:1;");this.backgroundGroup=t("g"),this.backgroundGroup.appendChild(f),this.backgroundGroup.appendChild(p),o.appendChild(this.backgroundGroup),this.textGroup=t("g"),i(this.textGroup,"font-size:16px;fill:#eeeeee;text-anchor: middle");for(var d=0;6>d;d++){var g=t("text");g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y","23"),this.textGroup.appendChild(g)}return o.appendChild(this.textGroup),o}},{key:"width",set:function(t){this.frame.width=t<this.minWidth?this.minWidth:t,this.domElement.setAttribute("width",t)}}]),t}();e.GLSVG=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1),a=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],i=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],a=arguments.length<=3||void 0===arguments[3]?0:arguments[3];n(this,t),this._x=e,this._y=i,this._width=r,this._height=a,this.halfWidth=r/2,this.halfHeight=a/2,this._center=new s.GLPoint(e+this.halfWidth,i+this.halfHeight)}return r(t,[{key:"setPosition",value:function(t){this.x=t.x,this.y=t.y}},{key:"getPosition",value:function(){return new s.GLPoint(this.x,this.y)}},{key:"getMaxX",value:function(){return this.x+this._width}},{key:"getMaxY",value:function(){return this.y+this._height}},{key:"converPoint",value:function(t){return new s.GLPoint(t.x-this.x,t.y-this.y)}},{key:"convertRect",value:function(e){return new t(e.x-this.x,e.y-this.y,e.width,e.height)}},{key:"center",set:function(t){this._center=t,this._x=this._center.x-this.halfWidth,this._y=this._center.y-this.halfHeight},get:function(){return this._center}},{key:"width",set:function(t){this._width=t,this.halfWidth=t/2,this._center.x=this._x+this.halfWidth},get:function(){return this._width}},{key:"height",set:function(t){this._height=t,this.halfHeight=t/2,this._center.y=this._y+this.halfHeight},get:function(){return this._height}},{key:"x",set:function(t){this._x=t,this._center.x=this._x+this.halfWidth},get:function(){return this._x}},{key:"y",set:function(t){this._y=t,this._center.y=this._y+this.halfHeight},get:function(){return this._y}}]),t}();e.GLRect=a},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){i(this,t),this.animationHandler=null,this.isAnimating=!1}return n(t,[{key:"startAnimating",value:function(){this.isAnimating=!0,this.requestAnimation()}},{key:"stopAnimating",value:function(){cancelAnimationFrame(this.animationHandler),this.isAnimating=!1}},{key:"enterFrame",value:function(){this.requestAnimation()}},{key:"requestAnimation",value:function(){var t=this;this.animationHandler=requestAnimationFrame(function(){t.enterFrame()})}},{key:"addTapListener",value:function(t,e){t.addEventListener("mouseup",e,!1),t.addEventListener("touchend",e,!1)}},{key:"removeTapListener",value:function(t,e){t.removeEventListener("mouseup",e,!1),t.removeEventListener("touchend",e,!1)}},{key:"destory",value:function(){this.stopAnimating()}}]),t}();e.IAnimation=r},function(t,e,i){"use strict";t.exports=i(7)()?Symbol:i(8)},function(t,e){"use strict";t.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(e){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}},function(t,e,i){"use strict";var n,r,s,a=i(9),o=i(22),h=Object.create,u=Object.defineProperties,c=Object.defineProperty,l=Object.prototype,f=h(null);"function"==typeof Symbol&&(n=Symbol);var p=function(){var t=h(null);return function(e){for(var i,n,r=0;t[e+(r||"")];)++r;return e+=r||"",t[e]=!0,i="@@"+e,c(l,i,a.gs(null,function(t){n||(n=!0,c(this,i,a(t)),n=!1)})),i}}();s=function(t){if(this instanceof s)throw new TypeError("TypeError: Symbol is not a constructor");return r(t)},t.exports=r=function d(t){var e;if(this instanceof d)throw new TypeError("TypeError: Symbol is not a constructor");return e=h(s.prototype),t=void 0===t?"":String(t),u(e,{__description__:a("",t),__name__:a("",p(t))})},u(r,{"for":a(function(t){return f[t]?f[t]:f[t]=r(String(t))}),keyFor:a(function(t){var e;o(t);for(e in f)if(f[e]===t)return e}),hasInstance:a("",n&&n.hasInstance||r("hasInstance")),isConcatSpreadable:a("",n&&n.isConcatSpreadable||r("isConcatSpreadable")),iterator:a("",n&&n.iterator||r("iterator")),match:a("",n&&n.match||r("match")),replace:a("",n&&n.replace||r("replace")),search:a("",n&&n.search||r("search")),species:a("",n&&n.species||r("species")),split:a("",n&&n.split||r("split")),toPrimitive:a("",n&&n.toPrimitive||r("toPrimitive")),toStringTag:a("",n&&n.toStringTag||r("toStringTag")),unscopables:a("",n&&n.unscopables||r("unscopables"))}),u(s.prototype,{constructor:a(r),toString:a("",function(){return this.__name__})}),u(r.prototype,{toString:a(function(){return"Symbol ("+o(this).__description__+")"}),valueOf:a(function(){return o(this)})}),c(r.prototype,r.toPrimitive,a("",function(){return o(this)})),c(r.prototype,r.toStringTag,a("c","Symbol")),c(s.prototype,r.toPrimitive,a("c",r.prototype[r.toPrimitive])),c(s.prototype,r.toStringTag,a("c",r.prototype[r.toStringTag]))},function(t,e,i){"use strict";var n,r=i(10),s=i(17),a=i(18),o=i(19);n=t.exports=function(t,e){var i,n,a,h,u;return arguments.length<2||"string"!=typeof t?(h=e,e=t,t=null):h=arguments[2],null==t?(i=a=!0,n=!1):(i=o.call(t,"c"),n=o.call(t,"e"),a=o.call(t,"w")),u={value:e,configurable:i,enumerable:n,writable:a},h?r(s(h),u):u},n.gs=function(t,e,i){var n,h,u,c;return"string"!=typeof t?(u=i,i=e,e=t,t=null):u=arguments[3],null==e?e=void 0:a(e)?null==i?i=void 0:a(i)||(u=i,i=void 0):(u=e,e=i=void 0),null==t?(n=!0,h=!1):(n=o.call(t,"c"),h=o.call(t,"e")),c={get:e,set:i,configurable:n,enumerable:h},u?r(s(u),c):c}},function(t,e,i){"use strict";t.exports=i(11)()?Object.assign:i(12)},function(t,e){"use strict";t.exports=function(){var t,e=Object.assign;return"function"!=typeof e?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,i){"use strict";var n=i(13),r=i(16),s=Math.max;t.exports=function(t,e){var i,a,o,h=s(arguments.length,2);for(t=Object(r(t)),o=function(n){try{t[n]=e[n]}catch(r){i||(i=r)}},a=1;h>a;++a)e=arguments[a],n(e).forEach(o);if(void 0!==i)throw i;return t}},function(t,e,i){"use strict";t.exports=i(14)()?Object.keys:i(15)},function(t,e){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e){"use strict";var i=Object.keys;t.exports=function(t){return i(null==t?t:Object(t))}},function(t,e){"use strict";t.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},function(t,e){"use strict";var i=Array.prototype.forEach,n=Object.create,r=function(t,e){var i;for(i in t)e[i]=t[i]};t.exports=function(t){var e=n(null);return i.call(arguments,function(t){null!=t&&r(Object(t),e)}),e}},function(t,e){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,i){"use strict";t.exports=i(20)()?String.prototype.contains:i(21)},function(t,e){"use strict";var i="razdwatrzy";t.exports=function(){return"function"!=typeof i.contains?!1:i.contains("dwa")===!0&&i.contains("foo")===!1}},function(t,e){"use strict";var i=String.prototype.indexOf;t.exports=function(t){return i.call(this,t,arguments[1])>-1}},function(t,e,i){"use strict";var n=i(23);t.exports=function(t){if(!n(t))throw new TypeError(t+" is not a symbol");return t}},function(t,e){"use strict";t.exports=function(t){return t&&("symbol"==typeof t||"Symbol"===t["@@toStringTag"])||!1}},function(t,e,i){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t,e,i){for(var n=!0;n;){var r=t,s=e,a=i;o=u=h=void 0,n=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,s);if(void 0!==o){if("value"in o)return o.value;var h=o.get;return void 0===h?void 0:h.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,i=a,n=!0}},o=(i(1),i(25)),h=i(4),u=i(5),c=function g(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3];r(this,g),this.top=t,this.left=e,this.bottom=i,this.right=n},l=i(6),f=l(),p=l(),d=function(t){function e(t){var i=this;if(r(this,e),t!==p)throw"GLBubbleView 是单例类，调用方法：GLBubbleView.sharedInstance()";a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.isShow=!1,this.isUpDirection=!1,this.directionOffsetY=9,this.cornerRadius=6,this.frame=new h.GLRect(0,0,100,60),this.angleFrame=new h.GLRect(0,0,10,7),this.marginLeft=5,this.marginRight=5,this.maxFrameX=window.innerWidth-this.marginRight,this.fontSize=14,this.lineHeight=16,this.content=null,this.contentSize=o.GLSize.zero(),this.contentMargin=new c(5,7,5,7),this.contentDiv=this.createContentDiv(),this.panel=this.createPanel(window.innerWidth,window.innerHeight),this.panel.appendChild(this.contentDiv),this.initCanvas(),this.tappedHandler=function(t){i.tapped(t)}}return n(e,t),s(e,[{key:"ifNeedsDisplay",value:function(t,e,i,n){this.isShow===!0?this.hidden():(this.content=t,this.anglePosition=e,this.tappedInnerCallback=i,this.tappedOuterCallback=n,this.show())}},{key:"show",value:function(){this.isShow=!0,this.currentAlpha=0;var t=this.getTextPixelLength(this.content);this.updateContent(t),this.updateBubbleSize(this.anglePosition),this.updateBubbleGraph(),document.body.appendChild(this.panel),this.addTapListener(this.panel,this.tappedHandler),this.startAnimating()}},{key:"hidden",value:function(){this.isShow=!1,this.removeTapListener(this.panel,this.tappedHandler),document.body.removeChild(this.panel),a(Object.getPrototypeOf(e.prototype),"stopAnimating",this).call(this)}},{key:"stopAnimating",value:function(){this.isShow===!1}},{key:"enterFrame",value:function(){this.isAnimating=!0,this.isShow===!0?this.currentAlpha+=.07:this.currentAlpha-=.09,this.stage.alpha=this.currentAlpha,this.contentDiv.opacity=this.currentAlpha,this.renderer.render(this.stage),this.currentAlpha<0||this.currentAlpha>1?(this.currentAlpha=this.currentAlpha<0?0:1,this.stopAnimating()):a(Object.getPrototypeOf(e.prototype),"enterFrame",this).call(this)}},{key:"tapped",value:function(t){t.preventDefault();var e=new PIXI.Point(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset);this.graphics.containsPoint(e)?"function"==typeof this.tappedInnerCallback&&this.tappedInnerCallback():"function"==typeof this.tappedOuterCallback&&this.tappedOuterCallback(),this.hidden()}},{key:"updateContent",value:function(t){if(100>=t)this.contentSize.width=t,this.contentSize.height=this.fontSize;else if(200>=t)this.contentSize.width=100,this.contentSize.height=2*this.lineHeight;else if(300>=t)this.contentSize.width=100,this.contentSize.height=3*this.lineHeight;else{var e=t/3;this.contentSize.width=e,this.contentSize.height=3*this.lineHeight;var i=300-this.contentMargin.left-this.contentMargin.right;e>i&&(this.contentSize.width=i)}this.contentDiv.innerHTML=this.content,this.contentDiv.style.width=this.contentSize.width+"px",this.contentDiv.style.height=this.contentSize.height+"px"}},{key:"updateBubbleSize",value:function(t){this.frame.width=this.contentSize.width+this.contentMargin.left+this.contentMargin.right,this.frame.height=this.contentSize.height+this.contentMargin.top+this.contentMargin.bottom,this.frame.x=t.x-this.frame.halfWidth;var e=this.frame.height+this.directionOffsetY+this.angleFrame.height;t.y<e?(this.isUpDirection=!0,this.angleFrame.y=t.y+this.directionOffsetY,this.frame.y=this.angleFrame.y+this.angleFrame.height):(this.isUpDirection=!1,this.frame.y=t.y-e,this.angleFrame.y=this.frame.getMaxY()),this.angleFrame.x=(this.frame.width-this.angleFrame.width)/2,this.frame.x<this.marginLeft?(this.angleFrame.x-=this.marginLeft-this.frame.x,this.frame.x=this.marginLeft):this.frame.getMaxX()>this.maxFrameX&&(this.angleFrame.x+=this.frame.getMaxX()-this.maxFrameX,this.frame.x=this.maxFrameX-this.frame.width),this.angleFrame.x=this.validateAngleOffsetX(this.angleFrame.x),this.angleFrame.x+=this.frame.x,this.contentDiv.style.top=this.frame.y+this.contentMargin.top+"px",this.contentDiv.style.left=this.frame.x+this.contentMargin.left+"px"}},{key:"validateAngleOffsetX",value:function(t){var e=this.frame.width-this.angleFrame.width-this.cornerRadius/2;return t>e?t=e:t<this.cornerRadius&&(t=this.cornerRadius),t}},{key:"getTextPixelLength",value:function(t){for(var e=0,i=0;i<t.length;i++){var n=(t.charAt(i),t.charCodeAt(i));e+=this.isDbcCase(n)?this.fontSize/2:this.fontSize}return e}},{key:"isDbcCase",value:function(t){return t>=32&&127>=t?!0:t>=65377&&65439>=t?!0:!1}},{key:"createPanel",value:function(t,e){var i="position:fixed; z-index:10000; top:0px; left:0px; width:"+t+"px; height:"+e+"px;";return this.createDiv(i)}},{key:"createContentDiv",value:function(){var t="position:absolute; z-index:20000; overflow:auto; word-wrap:break-word; word-break:break-all; padding:0px; color:#252525; font-size:"+this.fontSize+"px; line-height:"+this.lineHeight+"px; left:"+this.contentMargin.left+"px; top:"+this.contentMargin.top+"px;";return this.createDiv(t)}},{key:"createDiv",value:function(t){var e=document.createElement("div");return e.setAttribute("style",t),e}},{key:"initCanvas",value:function(){this.renderer=PIXI.autoDetectRenderer(window.innerWidth,window.innerHeight,{transparent:!0,resolution:window.devicePixelRatio}),this.renderer.view.setAttribute("style","position:absolute; z-index:15000; left:0px; top:0px; width:"+window.innerWidth+"px; height: "+window.innerHeight+"px"),this.panel.appendChild(this.renderer.view),this.stage=new PIXI.Container,this.graphics=new PIXI.Graphics,this.shadow=new PIXI.Graphics}},{key:"updateBubbleGraph",value:function(){this.drawBubbleView(this.shadow,0),this.shadow.alpha=.1,this.drawBubbleView(this.graphics,16313013);var t=2;this.isUpDirection&&(t=-2),this.shadow.y=this.graphics.y+t,this.stage.addChild(this.shadow),this.stage.addChild(this.graphics)}},{key:"drawBubbleView",value:function(t,e){t.clear(),t.beginFill(e),t.drawRoundedRect(this.frame.x,this.frame.y,this.frame.width,this.frame.height,this.cornerRadius);var i=void 0,n=void 0;this.isUpDirection?(i=this.angleFrame.y,n=this.angleFrame.getMaxY()):(i=this.angleFrame.getMaxY(),n=this.angleFrame.y),t.moveTo(this.angleFrame.x,n),t.lineTo(this.angleFrame.center.x,i),t.lineTo(this.angleFrame.getMaxX(),n),t.endFill()}}],[{key:"sharedInstance",get:function(){return this[f]||(this[f]=new e(p)),this[f]}}]),e}(u.IAnimation);e.GLBubbleView=d},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1];i(this,t),this.width=e,this.height=n}return n(t,null,[{key:"zero",value:function(){return new t}}]),t}();e.GLSize=r}]);